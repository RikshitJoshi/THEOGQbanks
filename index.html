<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Medical Question Bank | NEET PG & INI-CET</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/react@18/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="https://checkout.razorpay.com/v1/checkout.js"></script>

<style>
body{background:#020617;color:#e5e7eb}
.card{background:#000;padding:1.5rem;border-radius:1rem;border:1px solid #1f2937;cursor:pointer;position:relative}
.locked{filter:blur(2px)}
.lock-icon{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;font-size:2rem;background:rgba(0,0,0,.5)}
#loginOverlay{position:fixed;inset:0;z-index:9999;background:rgba(0,0,0,.9);display:flex;align-items:center;justify-content:center}
.header{display:flex;align-items:center;justify-content:space-between;margin-bottom:2rem}
.brand{display:flex;align-items:center;gap:12px}
.brand img{height:42px}
.brand h1{font-size:1.5rem;font-weight:800}
.brand span{font-size:.9rem;color:#94a3b8}
.insta{font-size:1.3rem}
</style>
</head>

<body>
<div id="root"></div>

<!-- LOGIN OVERLAY -->
<div id="loginOverlay">
  <div style="background:black;padding:28px;border-radius:14px;text-align:center">
    <h2 class="text-xl mb-4">Login Required</h2>
    <button onclick="googleLogin()" class="px-6 py-3 bg-cyan-400 text-black font-bold rounded-lg">
      Continue with Google
    </button>
  </div>
</div>

<script>
firebase.initializeApp({
  apiKey:"AIzaSyBtoP56S-PH9mr8_HMjl6Vp1-akZBHPv4A",
  authDomain:"og-pirate-login.firebaseapp.com",
  projectId:"og-pirate-login"
});

const auth=firebase.auth();
const db=firebase.firestore();

auth.setPersistence(firebase.auth.Auth.Persistence.LOCAL);

window.currentUser=null;
window.isPremium=false;

auth.onAuthStateChanged(async user=>{
  const overlay=document.getElementById("loginOverlay");
  if(!user){
    overlay.style.display="flex";
    window.isPremium=false;
    return;
  }

  overlay.style.display="none";
  window.currentUser=user;

  const ref=db.collection("users").doc(user.uid);
  const snap=await ref.get();

  if(!snap.exists){
    await ref.set({email:user.email,createdAt:Date.now()});
    window.isPremium=false;
  }else{
    const d=snap.data();
    window.isPremium=!!(d.expiry && Date.now()<d.expiry);
  }
});

function googleLogin(){
  auth.signInWithPopup(new firebase.auth.GoogleAuthProvider())
      .catch(e=>alert(e.message));
}

function startPayment(plan){
  const amount=plan==="monthly"?5000:19900;
  const duration=plan==="monthly"?2592000000:31536000000;

  new Razorpay({
    key:"rzp_live_S9L7SGabPrW69z",
    amount,currency:"INR",
    handler:async ()=>{
      await db.collection("users").doc(currentUser.uid).set({
        email:currentUser.email,
        plan,expiry:Date.now()+duration
      },{merge:true});
      alert("Premium Activated");
      window.isPremium=true;
    }
  }).open();
}
</script>

<script type="text/babel">
function App(){

const sections=[
{title:"1st Year MBBS",free:true,items:[
["ğŸ¦´","Anatomy","prepX_Anatomy.html"],
["â¤ï¸","Physiology","PrepX_Physiology.html"],
["ğŸ§ª","Biochemistry","prepX_Biochemistry.html"]
]},
{title:"2nd Year MBBS",free:false,items:[
["ğŸ”¬","Pathology","prepX_Pathology.html"],
["ğŸ’Š","Pharmacology","prepX_Pharmacology.html"],
["ğŸ¦ ","Microbiology","prepX_Microbiology.html"]
]},
{title:"Final Year MBBS",free:false,items:[
["ğŸ©º","Medicine","prepX_Medicine.html"],
["ğŸ—¡ï¸","Surgery","prepX_Surgery.html"],
["ğŸ‘¶","Pediatrics","prepX_Pediatrics.html"],
["ğŸ¤°","OBGYN","prepX_OBSGYNAE.html"],
["ğŸ¦¿","Orthopaedics","prepX_Orthopaedics.html"],
["ğŸ‘‚","ENT","prepX_ENT.html"],
["ğŸ‘ï¸","Ophthalmology","prepX_OPTHA.html"],
["ğŸ§´","Dermatology","prepX_Dermatology.html"],
["ğŸ§ ","Psychiatry","prepX_Psychiatry.html"],
["ğŸ˜´","Anaesthesia","prepX_Anaesthesia.html"],
["ğŸ©»","Radiology","prepX_Radiology.html"]
]},
{title:"Exams & Quizzes",free:false,items:[
["â“","NEET PG Quiz","https://neetpgquizz.netlify.app/"],
["â“","FMGE Quiz","https://fmgequizz.netlify.app/"]
]}
];

function openItem(link,free){
  if(free) return location.href=link;
  if(!window.isPremium){
    const c=prompt("Premium required\nM = â‚¹50\nY = â‚¹199");
    if(c==="m") startPayment("monthly");
    if(c==="y") startPayment("yearly");
    return;
  }
  link.startsWith("http")?window.open(link):location.href=link;
}

return(
<div className="max-w-6xl mx-auto p-6">

{/* HEADER */}
<div className="header">
  <div className="brand">
    <img src="og pirate.jpeg" alt="OG Pirate"/>
    <div>
      <h1>THE OG PIRATE</h1>
      <span>Medical Question Bank â€¢ NEET PG & INI-CET</span>
    </div>
  </div>
  <a className="insta" href="https://instagram.com/theogpiratee" target="_blank">ğŸ“·</a>
</div>

{sections.map(s=>(
<div key={s.title} className="mb-12">
<h2 className="text-xl mb-4">{s.title}</h2>
<div className="grid md:grid-cols-3 gap-4">
{s.items.map(([i,t,l])=>(
<div key={t} onClick={()=>openItem(l,s.free)}
 className={`card ${s.free?"":"locked"}`}>
<div className="text-3xl">{i}</div>
<div className="mt-2">{t}</div>
{!s.free && <div className="lock-icon">ğŸ”’</div>}
</div>
))}
</div>
</div>
))}
</div>
);
}

ReactDOM.createRoot(document.getElementById("root")).render(<App/>);
</script>

</body>
</html>